{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %} 文章发表{% endblock %}

{% block head %}
    {{ super() }}

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='edit/css/editormd.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='edit/css/editormd.logo.min.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='edit/css/editormd.preview.min.css') }}">

    <script src="{{ url_for('static', filename='edit/editormd.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/code-block-dialog.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/flowchart.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/jquery.flowchart.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/prettify.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/raphael.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/sequence-diagram.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/underscore.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='edit/lib/marked.min.js') }}" type="text/javascript"></script>

    <script type="text/javascript">
    $(document).ready( function() {
        var editor = editormd("editormd", {
            path : "../static/edit/lib/" ,// Autoload modules mode, codemirror, marked... dependents libs path
            height : 640,
            theme : "dark",
            codeFold : true,
            syncScrolling : false,
            htmlDecode : "style,script,iframe|on*",            // 开启 HTML 标签解析，为了安全性，默认不开启
            emoji : true,
            taskList : true,
            tocm            : true,         // Using [TOCM]
            tex : true,                   // 开启科学公式TeX语言支持，默认关闭
            flowChart : true,             // 开启流程图支持，默认关闭
            sequenceDiagram : true,       // 开启时序/序列图支持，默认关闭,
            imageUpload : true,

        });

        $('#bca').click(function () {
            var msg = $('.editormd-preview').html()
{#            var msg = $("#cd").val()#}
            alert(msg)
            $('#wei').html(msg)
        })

    })



</script>
{% endblock %}


{% block page_content %}
    {{ super() }}

        <div>
        {% if post != None %}
           <div class="" id="abcde">
                {{ post }}123
           </div>
        {% endif %}
    </div>
    <div id="wei">

    </div>

{#    <script>#}
{#        document.getElementById('wei').innerHTML = marked('```python    def index():    return "hello "```')#}
{#    </script>#}

    <div class="col-md-12" style="margin-bottom: 20px;">
        <form action="/post" method="post" class="form-group">
            <div style="display: none">
                {{ form.csrf_token() }}
            </div>
            <div class="form-group">
                <label for="title">文章标题</label>
                  {{ form.title(id='title', class="form-control") }}
            </div>
            <div class="form-group" >
                <label for="editormd">文章内容</label>
                <div id="editormd">
                    {{ form.body(id='body', class="editormd-markdown-textarea") }}
                </div>
            </div>
             <div class="form-group" style="display: block">
                {{ form.submit(id='abc', class='btn btn-default') }}
            </div>
        </form>
        <button class="btn btn-default" id="bca">点点</button>
    </div>



{#    <button id ='a' class="btn btn-default">点</button>#}
{##}

{% endblock %}
